{% extends "verdantadmin/base.html" %}
{% block titletag %}Search Terms{% endblock %}
{% block bodyclass %}page-explorer{% endblock %}

{% block content %}
    <header>
        <div class="row row-flush">
            <div class="left col9">
                <h1>Editors Picks</h1>
            </div>
            <div class="right col3">
                <a href="{% url 'verdantsearch_editorspicks_add' %}" class="button icon icon-plus-inverse">Add new editors pick</a>
            </div>
        </div>
    </header>


    <table class="listing full-width">
        <col />
        <col width="40%"/>
        <col />
        <thead>
            <tr>
                <th class="title">Terms</th>
                <th>Editors picks</th>
                <th>Views (past week)</th>
            </tr>
        </thead>
        <tbody>
            {% if searchterms_list %}
                {% for searchterms in searchterms_list %}
                    <tr>
                        <td class="title">
                            <h2><a href="{% url 'verdantsearch_editorspicks_edit' searchterms.urlify_terms %}" title="Edit this pick">{{ searchterms.terms }}</a></h2>
                        </td>
                        <td>
                            {% for editors_pick in searchterms.editors_picks.all %}
                                <a href="{% url 'verdantadmin_pages_edit' editors_pick.page.id %}" class="nolink">{{ editors_pick.page.title }}</a>{% if not forloop.last %}, {% endif %}
                            {% empty %}
                                None
                            {% endfor %}
                        </td>
                        <td>{{ searchterms.past_week_hits }}</td>
                    </tr>
                {% endfor %}
            {% else %}
                <tr><td colspan="3" class="no-results-message"><p>No editors picks have been added. Why not <a href="{% url 'verdantsearch_editorspicks_add' %}">add one</a>?</td></tr>
            {% endif %}
        </tbody>
    </table>
{% endblock %}