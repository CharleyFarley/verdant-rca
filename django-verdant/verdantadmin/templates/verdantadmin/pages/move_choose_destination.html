{% extends "verdantadmin/base.html" %}

{% block content %}
    <header>
        <h1>Moving page: <span>{{ page_to_move.title }}</span></h1>
    </header>

    <div class="nice-padding">

        <h2>Select a destination for this page</h2>

        <p class="breadcrumb">
            {% for page in viewed_page.get_ancestors %}
                <a class="navigate-pages" href="{% url 'verdantadmin_pages_move_choose_destination' page_to_move.id page.id %}">{{ page.title }}</a> /
            {% endfor %}
            <b>{{ viewed_page.title }}</b> (<a href="{% url 'verdantadmin_pages_move_confirm' page_to_move.id viewed_page.id %}">move page here</a>)
        </p>

        <table class="listing chooser">
            <thead>
                <tr>
                    <th class="title">Title</th>
                    <th class="type">Type</th>
                    <th></th>
                </tr>
            </thead>
            <tbody>
                {% for page in child_pages %}
                    <tr>
                        <td class="title">
                            {% if page.can_choose %}
                                <a href="{% url 'verdantadmin_pages_move_confirm' page_to_move.id page.page.id %}">{{ page.page.title }}</a>
                            {% else %}
                                {{ page.page.title }}
                            {% endif %}
                        </td>
                        {% if is_searching %}<td class="parent">{{ page.page.get_parent.title }}</td>{% endif %}
                        <td class="type">{{ page.page.content_type }}</td>
                        
                        <td class="{% if page.can_descend %}children{% else %}no-children{% endif %}">
                            {% if page.can_descend %}
                                <a href="{% url 'verdantadmin_pages_move_choose_destination' page_to_move.id page.page.id %}" class="icon text-replace icon-arrow-right navigate-pages" title="Explorer subpages of '{{ page.page.title }}'">Explore</a>
                            {% endif %}
                        </td>
                    </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
{% endblock %}
