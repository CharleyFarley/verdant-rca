{% load pageurl rca_tags %}


<div class="events-ads-wrapper">

<!-- Events -->
{% if showToday %}
    {% upcoming_events exclude=self %}
{% endif %}

<!-- adverts -->
{% if showAdverts %}
    {% comment %} The cycle of colours is needed by both adverts and open days. Open days only appear on the programme page where there are already adverts, so it is safe to start the cycle within the adverts block. Because of the way cycles work initially start it outside any forloop {% endcomment %}
    {% cycle 'advert-grey' 'advert-pale-blue' 'advert-green' 'advert-blue' 'advert-pink' as adcolors silent %}
    <div class="adverts">

        {% for advert in global_adverts %}
            <div class="{% cycle adcolors %}{{ adcolors }}">
                {% if advert.url %}<a href="{{ advert.url }}">{% elif advert.page %}<a href="{% pageurl advert.page %}">{% endif %}
                    <h2>{{ advert.text }}</h2>
                    {% if advert.plain_text %}{{ advert.plain_text }}{% endif %}
                {% if advert.url or advert.page %}</a>{% endif %}
            </div>
        {% endfor %}

        {% for advert in self.manual_adverts.all %}
            <div class="{% cycle adcolors %}{{ adcolors }}">
                {% if advert.ad.url %}<a href="{{ advert.ad.url }}">{% elif advert.ad.page %}<a href="{% pageurl advert.ad.page %}">{% endif %}
                <h2>{{ advert.ad.text }}</h2>
                {% if advert.ad.plain_text %}{{ advert.ad.plain_text }}{% endif %}
            {% if advert.ad.url or advert.ad.page %}</a>{% endif %}
            </div>
        {% endfor %}
    </div>
{% endif %}

<!--open days-->
{% if showOpenDays %}
    <div class="{% cycle adcolors %}{{ adcolors }}">
        <a href="{{ global_events_index_url }}?audience=openday&programme={{ self.programme }}">
            <h2>Open Days</h2>
        </a>
    </div>
{% endif %}

</div>

<!-- Related links -->
{% if showRelatedLinks %}
    {% sidebar_links calling_page=self %}
{% endif %}

<!-- related content -->
{% if showRelatedNews %}
    {% include 'rca/includes/sidebar_related_news.html' %}
{% endif %}

{% if showRelatedStudents %}
    {% students_related programme=self.programme year=self.degree_year exclude=self %}
{% endif %}

{% if showRelatedStudentsWork %}
    {% students_related_work year=self.degree_year exclude=self %}
{% endif %}

{% if showRandomStaff %}
    {% staff_random programmes=self.programmes exclude=self %}
{% endif %}

<!-- job adverts -->
{% if showJobs %}
    {% upcoming_jobs exclude=self %}
{% endif %}

{% if showRCANow %}
    {% rca_now_latest exclude=self %}
{% endif %}

<!-- tags -->
{% if showTags %}
    <!--<div class="related expanded">
        <h2>Tags</h2>
        <div class="wrapper">
            <ul>
                <li><a href="">animation (12)</a></li>
                <li><a href="">glassmaking (5)</a></li>
                <li><a href="">fashion (2)</a></li>
                <li><a href="">design (1)</a></li>
                <li><a href="">architecture (1)</a></li>
                <li><a href="">illustration (1)</a></li>
            </ul>
        </div>
    </div>-->
{% endif %}