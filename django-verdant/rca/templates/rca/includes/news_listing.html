{% load pageurl image_tags %}

{% if news %}
    <section class="one-plus x-plus module" data-pagination=".pagination">
        <div class="item-container">
            <ul class="row">
                {% for news_item in news %}
                    {% if forloop.counter0|divisibleby:"2" %}
                        <li class="newrow">
                    {% else %}
                        <li>
                    {% endif %}
                        <a href="{% pageurl news_item %}">
                            {% if news_item.feed_image %}
                                <div class="image">{% image news_item.feed_image width-400 %}</div>
                            {% endif %}
                            <div class="content">
                                {% if news_item.listing_intro %}
                                <h3 class="h5">{{ news_item.listing_intro }}</h3>
                                {% endif %}
                            </div>
                        </a>
                    </li>   
                {% endfor %}
                <li class="load-more{% if news|length|divisibleby:'2' %} newrow{% endif %}"><a href="#">+</a></li>
            </ul>
        </div>
    </section>

    <ul class="pagination infinite">
        <!--
        {% if news.has_previous %}
            <li class="previous"><a href="?page={{ news.previous_page_number }}{% for key,value in request.GET.items %}{% ifnotequal key 'page' %}&{{ key }}={{ value }}{% endifnotequal %}{% endfor %}">Previous</a></li>
        {% endif %}
        -->

        {% if news.has_next %}
            <li class="next"><a href="?page={{ news.next_page_number }}{% for key,value in request.GET.items %}{% ifnotequal key 'page' %}&{{ key }}={{ value }}{% endifnotequal %}{% endfor %}">Next</a></li>
        {% endif %}
    </ul>

{% endif %}