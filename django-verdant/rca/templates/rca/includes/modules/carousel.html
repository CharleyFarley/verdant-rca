
{% load image_tags %}

{% if self.carousel_items.all.count == 1 %}
{% endif %}


{% with self.carousel_items.all as carousel_items %}
    {% if carousel_items %}
        <section class="row">
            <ul class="carousel paginated">
                {% for carousel_item in carousel_items %}
                    {% if carousel_item.image %}
                        <li>
                            <div class="image {% if carousel_item.image.is_portrait %}portrait{% else %}landscape{% endif %}">
                                {% image carousel_item.image width-1000 %}
                            </div>
                            {% if carousel_item.overlay_text or carousel_item.image.title or carousel_item.image.medium or carousel_item.image.dimensions or carousel_item.image.permission or carousel_item.image.photographer %}
                                <div class="content">
                                    {% if carousel_item.overlay_text %}
                                        <h3 class="bc1">
                                            {% if carousel_item.link %}
                                                <a href="{{ carousel_item.link }}">
                                            {% endif %}
                                            {{ carousel_item.overlay_text }}...<span class="bc4 caps">Continue</span></a>
                                            {% if carousel_item.link %}
                                                </a>
                                            {% endif %}
                                        </h3>
                                    {% endif %}
                                    {% if carousel_item.image.title or carousel_item.image.medium or carousel_item.image.dimensions or carousel_item.image.permission or carousel_item.image.photographer %}
                                    <p class="caption a4">
                                        {% if carousel_item.image.title %}
                                            {{ carousel_item.image.title }}
                                            {% if carousel_item.image.creator_name %}
                                                by {{ carousel_item.image.creator_name }}
                                            {% endif %}
                                        {% endif %}
                                        {% if carousel_item.image.medium %}
                                            {% if carousel_item.image.title %}
                                                <br />
                                            {% endif %}
                                            {{ carousel_item.image.medium }}
                                        {% endif %}
                                        {% if carousel_item.image.dimensions %}
                                            {% if carousel_item.image.title or carousel_item.image.medium %}
                                                <br />
                                            {% endif %}
                                            {{ carousel_item.image.dimensions }}
                                        {% endif %}
                                        {% if carousel_item.image.permission %}
                                            {% if carousel_item.image.medium %}
                                                &#124;
                                            {% endif %}
                                            &copy; {{ carousel_item.image.permission }}
                                        {% endif %}
                                        {% if carousel_item.image.photographer %}
                                            {% if carousel_item.image.medium or carousel_item.image.permission %}
                                                &#124;
                                            {% endif %}
                                            {{ carousel_item.image.photographer }}
                                        {% endif %}
                                    </p>
                                    {% endif %}
                                </div>
                            {% endif %}
                        </li>
                    {% elif carousel_item.embedly_url %}
                        {% comment %}
                        <div class="videoembed vimeo">
                            <div class="playpause play">Play</div>
                            <div class="poster"><img src="https://i4.sndcdn.com/avatars-000012482606-k0gy7a-t200x200.jpg?3eddc42" height="531" /></div>
                            <iframe width="100%" height="166" scrolling="no" frameborder="no" src="https://w.soundcloud.com/player/?url=http%3A%2F%2Fapi.soundcloud.com%2Ftracks%2F69438429"></iframe>
                        </div>
                        {% endcomment %}
                        <div class="videoembed vimeo">
                            <div class="playpause play">Play</div>
                            <div class="poster"><img src="http://b.vimeocdn.com/ts/167/267/167267482_640.jpg" height="531" /></div>
                            <iframe src="http://player.vimeo.com/video/25401444?api=1&player_id=vimeoplayer1" width="944" height="531" frameborder="0" webkitallowfullscreen mozallowfullscreen allowfullscreen></iframe>
                        </div>
                    {% endif %}
                {% endfor %}
            </ul>
        </section>
    {% endif %}
{% endwith %}
