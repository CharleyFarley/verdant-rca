{% extends "rca/base.html" %}
{% load rca_tags rich_text pageurl %}


{% block body_class %}
    type-events-index
{% endblock %}

{% block content %}

	{% include "rca/includes/modules/h1-major.html" %}

	{% if self.intro %}
		<div class="content bc3">{{ self.intro|richtext }}</div>
	{% endif %}

	<section class="filters six-filters row">
	    <form id="filters" action="{% pageurl self %}" method="GET">
	        <ul>
				<li>
	                <p class="label">School</p>
	                <div class="options">
	                <label><input type="radio" name="school" value="all" {% if not request.GET.school or request.GET.school == 'all' %}checked="checked"{% endif %}>all</label>
					{% for key, value in global_schools %} 
					  	<label><input type="radio" name="school" value="{{ key }}" {% if request.GET.school == key %}checked="checked"{% endif %}>{{ value }}</label>
					{% endfor %}
					</div>
				</li>
				<li>
	                <p class="label">Programme</p>
	                <div class="options three-cols">
	                	<label><input type="radio" name="programme" value="all" {% if not request.GET.programme or request.GET.programme == 'all' %}checked="checked"{% endif %}>all</label>
	                	{% for key, value in global_programmes %} 
						  	<label><input type="radio" name="programme" value="{{ key }}" {% if request.GET.programme == key %}checked="checked"{% endif %}>{{ value }}</label>
						{% endfor %}
	                </div>
	            </li>
	            <li>
	                <p class="label">Location</p>
	                <div class="options">
	                	<label><input type="radio" name="location" value="all" {% if not request.GET.location or request.GET.location == 'all' %}checked="checked"{% endif %}>all</label>
	                	{% for key, value in global_locations %} 
						  	<label><input type="radio" name="location" value="{{ key }}" {% if request.GET.location == key %}checked="checked"{% endif %}>{% if key == 'other' %}Other location{% else %}{{ value }}{% endif %}</label>
						{% endfor %}
	                </div>
	            </li>
				<li>
	                <p class="label">Area</p>
	                <div class="options">
	                	<label><input type="radio" name="area" value="all" {% if not request.GET.area or request.GET.area == 'all' %}checked="checked"{% endif %}>all</label>
	                	{% for key, value in global_areas %} 
						  	<label><input type="radio" name="area" value="{{ key }}" {% if request.GET.area == key %}checked="checked"{% endif %}>{{ value }}</label>
						{% endfor %}
	                </div>
	            </li>
	            <li>
	                <p class="label">Audience</p>
	                <div class="options">
	                	<label><input type="radio" name="audience" value="all" {% if not request.GET.audience or request.GET.audience == 'all' %}checked="checked"{% endif %}>all</label>
	                	{% for key, value in global_audiences %} 
						  	<label><input type="radio" name="audience" value="{{ key }}" {% if request.GET.audience == key %}checked="checked"{% endif %}>{{ value }}</label>
						{% endfor %}
	                </div>
	            </li>
	            <li>
	                <p class="label">Upcoming or past</p>
	                <div class="options">
	                	<!--upcoming events checked by default - only deselected if someone has explicitly selected past results -->
	                	<label><input type="radio" name="period" value="upcoming"  {% if request.GET.period != 'past' %}checked="checked"{% endif %}>upcoming</label>
						<label><input type="radio" name="period" value="past" {% if request.GET.period == 'past' %}checked="checked"{% endif %}>past</label>
	                </div>
	            </li>
				<input type="submit" />
			</ul>
		</form>
	</section>
    
    <div id="listing">
    	{% include "rca/includes/events_listing.html" %}
	</div>

    {% include "rca/includes/modules/twitter-feed.html" %}
{% endblock %}

{% block sidebar %}
    {% include "rca/includes/sidebar.html" with showToday="true" showRelatedLinks="true" %}
{% endblock %}


{% block extra_js %}
	<script type="text/javascript">
		//global var for events_index set here so that it can be used by the script being called
		var events_index = "{{ global_events_index }}";
	</script>
	<script src="/static/rca/js/events-listing.js"></script>
{% endblock %}

<!-- To dos
	- ads
-->